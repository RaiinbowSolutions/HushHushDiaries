<nav>
    <h2>Navigation</h2>
    <button (click)="openUserEdit()">Login</button>
    <button (click)="openUserDetailEdit()">Detail</button>
    <button (click)="openUserOptionEdit()">Option</button>
    <button (click)="openUserDeactivate()">Deactivate</button>
</nav>
<div>
    <div class="login" *ngIf="state === 'login'">
        <h2>Edit Login</h2>
        <p>Update email:</p>
        <form [formGroup]="form_email">
            <input type="email" name="email" placeholder="Email" autocomplete="email" formControlName="email" />
            <p class="validate-message" *ngIf="email.errors?.['required'] && (email.dirty || email.touched)">Email is required.</p>
            <p class="validate-message" *ngIf="email.errors?.['email'] && (email.dirty || email.touched)">Email must be a valid email.</p>
            <p class="validate-message" *ngIf="email.errors?.['emailTaken'] && (email.dirty || email.touched)">Email already in use.</p>
            <button (click)="updateEmail()" [disabled]="!form_email.valid">Update</button>
        </form>
        <p>Update username:</p>
        <form [formGroup]="form_username">
            <input type="text" name="username" placeholder="Username" autocomplete="nickname" formControlName="username" />
            <div class="field">
                <input type="checkbox" name="anonym" id="anonym" formControlName="anonym"/>
                <label for="anonym">Anonym?</label>
            </div>
            <button (click)="updateUsername()" [disabled]="!form_username.valid">Update</button>
        </form>
        <p>Update password:</p>
        <form [formGroup]="form_password">
            <input type="password" name="password" placeholder="Password" autocomplete="new-password" formControlName="password" />
            <p class="validate-message" *ngIf="password.errors?.['required'] && (password.dirty || password.touched)">Password is required.</p>
            <input type="password" name="retype_password" placeholder="Password Retype" autocomplete="new-password" formControlName="retype_password" />
            <p class="validate-message" *ngIf="retype_password.errors?.['required'] && (retype_password.dirty || retype_password.touched)">Retype password is required.</p>
            <p class="validate-message" *ngIf="form_password.errors?.['notMatching'] && (retype_password.dirty || retype_password.touched)">Must match password.</p>
            <button (click)="updatePassword()" [disabled]="!form_password.valid">Update</button>
        </form>
    </div>
    <div class="detail" *ngIf="state === 'detail'">
        <h2>Edit Detail</h2>
        <p>Update personal information:</p>
        <form [formGroup]="form_detail">
            <input type="text" name="firstname" placeholder="Firstname" autocomplete="name" formControlName="firstname" />
            <input type="text" name="lastname" placeholder="Lastname" autocomplete="family-name" formControlName="lastname" />
            <div class="field">
                <label for="birthday">Birthday</label>
                <input type="date" name="birthday" id="birthday" autocomplete="bday" formControlName="birthday" />
            </div>
            <div class="field">
                <label for="gender">Gender</label>
                <select name="gender" id="gender" title="Gender" formControlName="gender">
                    <option [value]="null">None</option>
                    <option *ngFor="let gender of genders" [value]="gender">{{gender | titlecase}}</option>
                </select>
            </div>
            <input type="text" name="pronouns" placeholder="Pronouns" autocomplete="sex" formControlName="pronouns" />
            <textarea name="description" formControlName="profile_description"></textarea>
            <button (click)="updateDetail()" [disabled]="!form_detail.valid">Update</button>
        </form>
    </div>
    <div class="option" *ngIf="state === 'option'">
        <h2>Edit Option</h2>
        <p>Update settins:</p>
        <form [formGroup]="form_option">
            <div class="field">
                <label for="font_size">Font size</label>
                <select name="font_size" title="Font size" id="font_size" formControlName="font_size">
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                </select>
            </div>
            <div class="field">
                <label for="design_tempature">Design tempature</label>
                <select name="design_tempature" title="Design tempature" id="design_tempature" formControlName="design_tempature">
                    <option value="cold">Cold</option>
                    <option value="normal">Normal</option>
                    <option value="warm">Warm</option>
                </select>
            </div>
            <div class="field">
                <label for="email_show_state">Email visability</label>
                <select name="email_show_state" title="Email visability" id="email_show_state" formControlName="email_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="username_show_state">Username visability</label>
                <select name="username_show_state" title="Username visability" id="username_show_state" formControlName="username_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="firstname_show_state">Firstname visability</label>
                <select name="firstname_show_state" title="Firstname visability" id="firstname_show_state" formControlName="firstname_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="lastname_show_state">Lastname visability</label>
                <select name="lastname_show_state" title="Lastname visability" id="lastname_show_state" formControlName="lastname_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="birthday_show_state">Birthday visability</label>
                <select name="birthday_show_state" title="Birthday visability" id="birthday_show_state" formControlName="birthday_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="gender_show_state">Gender visability</label>
                <select name="gender_show_state" title="Gender visability" id="gender_show_state" formControlName="gender_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="pronouns_show_state">Pronouns visability</label>
                <select name="pronouns_show_state" title="Pronouns visability" id="pronouns_show_state" formControlName="pronouns_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <div class="field">
                <label for="profile_description_show_state">Description visability</label>
                <select name="profile_description_show_state" title="Description visability" id="profile_description_show_state" formControlName="profile_description_show_state">
                    <option value="hidden">Hidden</option>
                    <option value="public">Public</option>
                </select>
            </div>
            <button (click)="updateOption()" [disabled]="!form_option.valid">Update</button>
        </form>
    </div>
    <div class="deactivate" *ngIf="state === 'deactivate'">
        <h2>Deactivate</h2>
        <form [formGroup]="form_deactivate">
            <button (click)="deactivate()" [disabled]="!form_deactivate.valid">Deactivate Account</button>
        </form>
    </div>
</div>